# LongHaulConsolidation
Allocate orders in trucks such that the maximum amount of product is consolidated per destination, it take into account ultimate destination and path to destination to consolidate based on final destination or proximity to lane.

# Introduction

This project does the homework of taking ERP system orders (from two different ERP systems) and take destination data to properly allocate such orders to the right trucks.

These are long haul shipments, meaning, they go beyond the city of origin. The goal is to maximize the amount of orders that go together in a truck. Since freight costs fall as volume increases (economies of scale) a proxy way of optimizing is to essentially maximize the amount of product that goes towards each destination.

This project developed as follows:
1. Join all orders from different ERP systems
2. Establish a function to calculate whether an order belongs to the local shipments (within the city) or long haul ones. This was developed by outlining the "local" limits with the assitance of Google Maps Tools, such data was extracted in the "latitude, longitude" format. This data was in turn used in a polygon function to in turn see if the destination of any such order rested inside the polygon. Of course, the destination (zip code) had to be converted to lat/long to verify if it belonged to local shipments or long haul one.
3. Subsequently, shipments that were in turn labelled as long haul, were categorized as either belonging or not to predetermined clusters. The criteria for this took into consideration how far the shipments were going to determine how close they needed to be to any given cluster. This was important to determine whether a shipment belonged to any given cluster or not. This aforementioned distance from a cluster, was measured as the distance between the destination zip code and the centroid (lat/long) of the closest cluster. For example, if a shipment was going somwhere close to Denver (a cluster), the program in turn measured how far the destination zip code was from the centroid of Denver. Denver is appx 1,000 miles from the origin (LA), in turn, the criteria is that in order to belong to that cluster, the destination has to be at most 50 miles away from the centroid (100/2).
4. Even more interestingly, the code takes into consideration orders that may not belong to a cluster but who's destination is on the way to a cluster. This is the highlight of the program, it measures the perpendicular distance from the closest point to the closest lane (path) and in turn provides you the closest lane and tells you how far it is from it. At this point, the user can use criteria and determine if it's feasible to put that order in that truck. For example, if an order is going to San Bernardino, yet the closest lane is that which goes to Houston, and such lane is only 1 mile away from the San Bernardino destination, then it would be feasible to load that order into the truck going to Denver.

Ultimately the output is a summarized dataframe that clearly illustrates what cluster each order belongs to (if any) and in case the order doesn't belong to any cluster, it outlines what the closest lane is and how far it is. This is a true innovation for a traditional logistics company wherein an open source Python notebook like this one can be used to save a significant amount of freight expense by minimizing truck use.
